# 15. 割り込みを用いたシリアルポート操作

* 送信・受信それぞれリングバッファを用意する
* FIFOを用い、ある程度まとめて送受信できるようにする
* 変な所で割り込みが入って災いが起きないよう、とりあえずcli・stiで保護する
  * とりあえず安全側に倒しておきたい、パフォーマンスは余裕があれば
  * 割り込み無効状態で来たかもしれないので、stiは無条件にはしない
  * 将来マルチコア対応にする場合、cli・stiではなくロックが要る？
* 割り込み無効状態でブロッキングする関数に入って詰まないよう、送受信の関数を呼ぶ
* 初期化前は直接操作にフォールバックする
